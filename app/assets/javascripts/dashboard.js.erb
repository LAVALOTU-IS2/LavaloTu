$(document).ready(function () {
	function setConverter(set){
		var ids = ""; 
		set.forEach(function(value, key, garment){
			ids += value + " ";
		});
		return ids;
	}
	$.ajax({
		dataType: "json",
		url: 'http://localhost:3000/api/v1/laundries/',
		success: function(data){
			//console.log(data);
			//var laundries = JSON.parse(data);
			var dictionary = {};
			for(var i = 0; i < data.laundries.length; i++){
				var garments = data.laundries[i].garments;
				var mySet = new Set();
				for (var j = 0; j < garments.length ; j++){
					mySet.add(garments[j].id + "");
				}
				dictionary[data.laundries[i].id + "" ] = setConverter(mySet);
			}
			$.ajax({
				dataType: "json",
				url: 'http://localhost:3000/api/v1/services/',
				data: { services: dictionary },
				success: function(data){
					for( var i = 0; i < data.services.length; i++){
						console.log(data.services[i]);	
					}
				}
			});
		}
	});
});


